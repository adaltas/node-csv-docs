<!DOCTYPE html><html lang="en"><head><!-- Meta--><meta charset="utf-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>CSV and object transformer | Node.js CSV project</title><meta name="description" content="CSV parser and stringifier with a simple api, full of options and tested against large datasets."><meta name="keywords" content="csv, parser, stringifier, nodejs"><meta name="author" content="David Worms"><meta name="generator" content="DocPad v6.78.4" /><meta name="viewport" content="width=device-width"><!-- Icons--><link rel="shortcut icon" href="/ico/favicon.ico"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ico/apple-touch-icon-144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72-precomposed.png"><link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon-57-precomposed.png"><!--if lt IE 9script(async src="http://html5shim.googlecode.com/svn/trunk/html5.js")
--><!-- Styles--><link  rel="stylesheet" href="/vendor/prettify.css" /><link  rel="stylesheet" href="/vendor/components-bootstrap/css/bootstrap.css" /><link  rel="stylesheet" href="/vendor/ribbon.css" /><link  rel="stylesheet" href="/styles/style.css" /><link  rel="stylesheet" href="/styles/desert.css" /></head><body id="csv"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">CSV<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/" property="dc:title">Homepage </a></li><li><a href="/csv" property="dc:title">Documentation </a></li><li><a href="/csv/examples" property="dc:title">Examples </a></li><li><a href="/csv/community" property="dc:title">Community </a></li><li><a href="https://github.com/wdavidw/node-csv" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Generate<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/generate" property="dc:title">Documentation </a></li><li><a href="/generate/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-generate" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-generate/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/stream-generate" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Parse<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/parse" property="dc:title">Documentation </a></li><li><a href="/parse/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-parse" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-parse/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-parse" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Transform<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/transform" property="dc:title">Documentation </a></li><li><a href="/transform/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-stream-transform" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-stream-transform/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-transform" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Stringify<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/stringify" property="dc:title">Documentation </a></li><li><a href="/stringify/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-stringify" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-stringify/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-stringify" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li></ul></div></div></nav><div class="container"><section id="content" class="content"><article id="page" class="page"><h1>CSV and object transformer</h1><div class="page-content"><p><a href="http://travis-ci.org/adaltas/node-stream-transform"><img src="https://secure.travis-ci.org/adaltas/node-stream-transform.png" alt="Build Status"></a></p>
<p>This project provides a simple object transformation framework implementing the
Node.js <code>stream.Transform</code> API. It was originally developed as a part of the Node.js
<a href="https://github.com/adaltas/node-csv">CSV package</a> (<code>npm install csv</code>) and can be used independently.</p>
<p>Source code for this project is available on <a href="https://github.com/adaltas/node-stream-transform">GitHub</a>.</p>
<ul>
<li>Simple callback based API</li>
<li>Node.js <a href="http://nodejs.org/api/stream.html#stream_class_stream_transform">stream.Transform</a> API, pipe through it</li>
<li>synchronous versus asynchronous user callbacks</li>
<li>Accept object, array or JSON as input and output</li>
<li>Sequential or user-defined concurrent execution</li>
<li>Skip and create new records</li>
<li>Alter or clone input data</li>
</ul>
<h2 id="usage">Usage</h2>
<p>Run <code>npm install csv</code> to install the full CSV module or run
<code>npm install stream-transform</code> if you are only interested by this package.</p>
<p>Use the callback style API for simplicity or the stream based API for
scalability or mix the 2 APIs.</p>
<p>The source code uses modern JavaScript features and run natively in Node 7.6+.
For older browsers or older versions of Node, use the module inside &quot;./lib/es5&quot;.</p>
<h3 id="callback-api">Callback API</h3>
<p><code>transform(data, handler, [options], callback)</code>     </p>
<h3 id="-node-js-stream-api-stream-"><a href="http://nodejs.org/api/stream.html#stream_class_stream_transform">Node.js Stream API</a></h3>
<p><code>transform(data, [options], handler, [options], [callback])</code>   </p>
<p>For additional usage and example, you may refer to
<a href="/transform/examples/">example page</a>,
<a href="https://github.com/adaltas/node-stream-transform/tree/master/samples">the &quot;samples&quot; folder</a> and <a href="https://github.com/adaltas/node-stream-transform/tree/master/test">the &quot;test&quot; folder</a>.</p>
<h2 id="options-and-properties">Options and properties</h2>
<p>Options include:</p>
<ul>
<li><code>parallel</code> (number)<br> The number of transformation callbacks to run in parallel, default to &quot;100&quot;.   </li>
<li><code>consume</code> (boolean)<br>In the absence of a consumer, like a stream.Readable, trigger the
consumption of the stream.   </li>
<li><code>params</code> (anything)<br>Pass user defined parameters to the user handler as last argument.   </li>
</ul>
<p>Available properties:</p>
<ul>
<li><code>transform.running</code><br> The number of transformation callback being run at a given time.   </li>
<li><code>transform.started</code><br> The number of transformation callback which have been initiated.   </li>
<li><code>transform.finished</code><br> The number of transformation callback which have been executed.   </li>
</ul>
<h2 id="synchronous-versus-asynchronous-execution">Synchronous versus asynchronous execution</h2>
<p>The mode is defined by the signature of transformation function. It is expected
to run synchronously when it declares only one argument, the data to
transform. It is expected to run asynchronously when it declares two arguments,
the data to transform and the callback to be called once the transformed data
is ready.</p>
<p>In synchronous mode, you may simply return the altered data or throw an error.
In asynchronous mode, you must call the provided callback with 2 arguments, the
error if any and the altered data.</p>
<p>Using the asynchronous mode present the advantage that more than one record may
be emitted per transform callback.</p>
<h2 id="array-versus-objects">Array versus objects</h2>
<p>The transformation function may either receive arrays or objects.</p>
<p>If you specify the <code>columns</code> read option, the <code>row</code> argument will be
provided as an object with keys matching columns names. Otherwise it
will be provided as an array.</p>
<h2 id="sequential-versus-concurrent-execution">Sequential versus concurrent execution</h2>
<p>By sequential, we mean only 1 transformation function is running at a given
time. By concurrent, we mean a maximum of x functions are running in parrallel.
The number of running functions is defined by the &quot;parallel&quot; option. When set to
&quot;1&quot;, the mode is sequential, when above &quot;1&quot;, it defines the maximum of running
functions. Note, this only affect asynchronous executions.</p>
<h2 id="skipping-and-creating-records">Skipping and creating records</h2>
<p>Skipping records is easily achieved by returning null in synchonous mode or
passing null to the callback handler in asynchonous mode. Generating multiple
records is only supported in asynchonous mode by providing n-arguments after the
error argument instead of simply one.</p>
<h2 id="altering-or-cloning-the-provided-data">Altering or cloning the provided data</h2>
<p>The data recieved inside the transformation function is the original data and is
not modified nor cloned. Depending on which api you choose, it may be provided
in the constructor or send to the <code>write</code> function. If you wish to not alter the
original data, it is your responsibility to send a new data in your
transformation function instead of the original modified data.</p>
</div></article></section><hr><footer><div>© Adaltas 2014</div><div style="font-style:italic; font-size: 12px">This website was last updated at Fri May 11 2018</div></footer></div><div class="right ribbon-holder"><a href="https://github.com/adaltas/node-stream-transform" class="darkblue ribbon"><span class="text">Fork me on GitHub</span></a></div><!-- Scripts--><script defer="defer"  src="/vendor/prettify.js"></script><script defer="defer"  src="/vendor/jquery/dist/jquery.js"></script><script defer="defer"  src="/vendor/components-bootstrap/js/bootstrap.js"></script><script defer="defer"  src="/vendor/log.js"></script><script defer="defer"  src="/vendor/modernizr.js"></script><script defer="defer"  src="/scripts/script.js"></script></body></html>
