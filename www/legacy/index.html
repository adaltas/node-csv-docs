<!DOCTYPE html><html lang="en"><head><!-- Meta--><meta charset="utf-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Node CSV | Node.js CSV project</title><meta name="description" content="CSV parser and stringifier with a simple api, full of options and tested against large datasets."><meta name="keywords" content="csv, parser, stringifier, nodejs"><meta name="author" content="David Worms"><meta name="generator" content="DocPad v6.78.4" /><meta name="viewport" content="width=device-width"><!-- Icons--><link rel="shortcut icon" href="/ico/favicon.ico"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ico/apple-touch-icon-144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72-precomposed.png"><link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon-57-precomposed.png"><!--if lt IE 9script(async src="http://html5shim.googlecode.com/svn/trunk/html5.js")
--><!-- Styles--><link  rel="stylesheet" href="/vendor/prettify.css" /><link  rel="stylesheet" href="/vendor/components-bootstrap/css/bootstrap.css" /><link  rel="stylesheet" href="/vendor/ribbon.css" /><link  rel="stylesheet" href="/styles/style.css" /><link  rel="stylesheet" href="/styles/desert.css" /></head><body id="csv"><nav role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">CSV<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/" property="dc:title">Homepage </a></li><li><a href="/csv" property="dc:title">Documentation </a></li><li><a href="/csv/examples" property="dc:title">Examples </a></li><li><a href="/csv/community" property="dc:title">Community </a></li><li><a href="https://github.com/wdavidw/node-csv" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Generate<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/generate" property="dc:title">Documentation </a></li><li><a href="/generate/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-generate" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-generate/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/stream-generate" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Parse<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/parse" property="dc:title">Documentation </a></li><li><a href="/parse/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-parse" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-parse/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-parse" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Transform<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/transform" property="dc:title">Documentation </a></li><li><a href="/transform/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-stream-transform" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-stream-transform/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-transform" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Stringify<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/stringify" property="dc:title">Documentation </a></li><li><a href="/stringify/examples" property="dc:title">Examples </a></li><li><a href="https://github.com/wdavidw/node-csv-stringify" property="dc:title">GitHub <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://github.com/wdavidw/node-csv-stringify/blob/master/src/index.coffee.md" property="dc:title">Source Code <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="https://www.npmjs.org/package/csv-stringify" property="dc:title">NPM <span class="glyphicon glyphicon-new-window"></span></a></li></ul></li><li class="dropdown"><a href="/pages/stringify" data-toggle="dropdown" property="dc:title">Legacy<span class="caret"></span></a><ul role="menu" class="dropdown-menu"><li><a href="/legacy" property="dc:title">Introduction </a></li><li><a href="/legacy/from" property="dc:title">Reading data from a source </a></li><li><a href="/legacy/to" property="dc:title">Writing data to a destination </a></li><li><a href="/legacy/transformer" property="dc:title">Transforming data </a></li><li><a href="/legacy/columns" property="dc:title">Columns </a></li><li><a href="/legacy/parser" property="dc:title">Parsing </a></li><li><a href="/legacy/stringifier" property="dc:title">Stringifier </a></li><li><a href="/legacy/changes" property="dc:title">Changes in latest versions </a></li></ul></li></ul></div></div></nav><div class="container"><section id="content" class="content"><article id="page" class="page"><h1>Node CSV</h1><div class="page-content"><p>This project provides CSV parsing and has been tested and used 
on large input files.</p>
<ul>
<li>Follow the Node.js streaming API</li>
<li>Async and event based</li>
<li>Support delimiters, quotes, escape characters and comments</li>
<li>Line breaks discovery: detected in source and reported to destination</li>
<li>Data transformation</li>
<li>Support for large datasets</li>
<li>Complete test coverage as sample and inspiration</li>
<li>no external dependencies</li>
</ul>
<p>Important: this documentation covers the current version (0.2.x) of 
<code>node-csv-parser</code>. The documentation for the previous version (0.1.0) is 
available <a href="https://github.com/adaltas/node-csv-parser/tree/v0.1">here</a>.</p>
<h2 id="installation">Installation</h2>
<pre><code class="lang-bash">npm install csv
</code></pre>
<h2 id="quick-example">Quick example</h2>
<p>This take a string with a comment and convert it to an array:</p>
<pre><code class="lang-javascript">
// node samples/string.js
csv()
.from.string(
  &#39;#Welcome\n&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;\n&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;&#39;,
  {comment: &#39;#&#39;} )
.to.array( function(data){
  console.log(data)
} );
// [ [ &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39; ], [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39; ] ]
</code></pre>
<h2 id="advanced-example">Advanced example</h2>
<p>The following example illustrates 4 usages of the library:</p>
<ul>
<li>Plug a readable stream from a file</li>
<li>Direct output to a file path</li>
<li>Transform each row</li>
<li>Listen to events</li>
</ul>
<pre><code class="lang-javascript">
// node samples/sample.js
var csv = require(&#39;csv&#39;);
var fs = require(&#39;fs&#39;);
csv()
.from.stream(fs.createReadStream(__dirname+&#39;/sample.in&#39;))
.to.path(__dirname+&#39;/sample.out&#39;)
.transform( function(row){
  row.unshift(row.pop());
  return row;
})
.on(&#39;record&#39;, function(row,index){
  console.log(&#39;#&#39;+index+&#39; &#39;+JSON.stringify(row));
})
.on(&#39;end&#39;, function(count){
  console.log(&#39;Number of lines: &#39;+count);
})
.on(&#39;error&#39;, function(error){
  console.log(error.message);
});
// #0 [&quot;2000-01-01&quot;,&quot;20322051544&quot;,&quot;1979.0&quot;,&quot;8.8017226E7&quot;,&quot;ABC&quot;,&quot;45&quot;]
// #1 [&quot;2050-11-27&quot;,&quot;28392898392&quot;,&quot;1974.0&quot;,&quot;8.8392926E7&quot;,&quot;DEF&quot;,&quot;23&quot;]
// Number of lines: 2
</code></pre>
<h2 id="pipe-example">Pipe example</h2>
<p>The module follow a Stream architecture. At its core, the parser and 
the stringifier utilities provide a <a href="http://nodejs.org/api/stream.html#stream_writable_stream">Stream Writer</a> 
and a <a href="http://nodejs.org/api/stream.html#stream_readable_stream">Stream Reader</a> implementation available in the CSV API.</p>
<pre><code class="lang-javascript">
+--------+      +----------+----------+       +--------+
|        |      |          |          |       |        |
|        |      |         CSV         |       |        |
|        |      |          |          |       |        |
| Stream |      |  Writer  |  Reader  |       | Stream |
| Reader |.pipe(|   API    |   API    |).pipe(| Writer |)
|        |      |          |          |       |        |
|        |      |          |          |       |        |
+--------+      +----------+----------+       +--------+
</code></pre>
<p>Here&#39;s a quick example:</p>
<pre><code class="lang-javascript">
in = fs.createReadStream(&#39;./in&#39;)
out = fs.createWriteStream(&#39;./out&#39;)
in.pipe(csv()).pipe(out)
</code></pre>
<h2 id="installing">Installing</h2>
<p>Via <a href="http://github.com/isaacs/npm">npm</a>:</p>
<pre><code class="lang-bash">npm install csv
</code></pre>
<p>Via git (or downloaded tarball):</p>
<pre><code class="lang-bash">git clone http://github.com/adaltas/node-csv-parser.git
</code></pre>
<h2 id="events">Events</h2>
<p>The library extends Node <a href="http://nodejs.org/api/events.html">EventEmitter</a> class and emit all
the events of the Writable and Readable <a href="http://nodejs.org/api/stream.html">Stream API</a>. Additionally, the useful &quot;records&quot; event 
is emitted.</p>
<ul>
<li><em>record</em><br>Emitted by the stringifier when a new row is parsed and transformed. The data is 
the value returned by the user <code>transform</code> callback if any. Note however that the event won&#39;t 
be called if <code>transform</code> returns <code>null</code> since the record is skipped.
The callback provides two arguments. <code>row</code> is the CSV line being processed (an array or an object)
and <code>index</code> is the index number of the line starting at zero</li>
<li><em>data</em><br>Emitted by the stringifier on each line once the data has been transformed and stringified.</li>
<li><em>drain</em>   </li>
<li><em>end</em><br>Emitted when the CSV content has been parsed.</li>
<li><em>finish</em><br>Emitted when all data has been flushed to the underlying system. For example, when writting to a file with <code>csv().to.path()</code>, the event will be called once the writing process is complete and the file closed.</li>
<li><em>error</em><br>Thrown whenever an error occured.</li>
</ul>
<h2 id="architecture">Architecture</h2>
<p>The code is organized mainly around 5 main components. 
The &quot;from&quot; properties provide convenient functions 
to write CSV text or to plug a Stream Reader. The &quot;parser&quot; 
takes this CSV content and transform it into an array or 
an object for each line. The &quot;transformer&quot; provides the ability 
to work on each line in a synchronous or asynchronous mode. 
The &quot;stringifier&quot; takes an array or an object and serializes it into 
CSV text. Finally, the &quot;to&quot; properties provide convenient 
functions to retrieve the text or to write to plug a Stream Writer.</p>
<pre><code class="lang-javascript">
+-------+--------+--------------+--------------+-----+
|       |        |              |              |     |
| from -&gt; parser -&gt; transformer -&gt; stringifier -&gt; to |
|       |        |              |              |     |
+-------+--------+--------------+--------------+-----+
</code></pre>
<p>Note, even though the &quot;parser&quot;, &quot;transformer&quot; and &quot;singifier&quot; are available
as properties, you won&#39;t have to interact with those.</p>
<h2 id="stream-1-api">Stream 1 API</h2>
<ul>
<li><p><code>pause()</code><br> Implementation of the Readable Stream API, requesting that no further data 
 be sent until resume() is called.</p>
</li>
<li><p><code>resume()</code><br>Implementation of the Readable Stream API, resuming the incoming &#39;data&#39; 
events after a pause().</p>
</li>
<li><p><code>write(data, [preserve])</code><br>Implementation of the Writable Stream API with a larger signature. Data
may be a string, a buffer, an array or an object.<br>If data is a string or a buffer, it could span multiple lines. If data 
is an object or an array, it must represent a single line.<br>Preserve is for line which are not considered as CSV data.</p>
</li>
<li><p><code>end()</code><br>Terminate the parsing. Call this method when no more csv data is 
to be parsed. It implement the StreamWriter API by setting the <code>writable</code> 
property to &quot;false&quot; and emitting the <code>end</code> event.</p>
</li>
<li><p><code>transform(callback, [options])</code><br>Register the transformer callback. The callback is a user provided 
function call on each line to filter, enrich or modify the 
dataset. More information in the &quot;transforming data&quot; section.</p>
</li>
<li><p><code>error(error)</code><br>Unified mechanism to handle error, emit the error and mark the 
stream as non readable and non writable.</p>
</li>
</ul>
</div></article></section><hr><footer><div>Â© Adaltas 2014</div><div style="font-style:italic; font-size: 12px">This website was last updated at Wed Mar 28 2018</div></footer></div><div class="right ribbon-holder"><a href="https://github.com/adaltas/node-csv" class="darkblue ribbon"><span class="text">Fork me on GitHub</span></a></div><!-- Scripts--><script defer="defer"  src="/vendor/prettify.js"></script><script defer="defer"  src="/vendor/jquery/dist/jquery.js"></script><script defer="defer"  src="/vendor/components-bootstrap/js/bootstrap.js"></script><script defer="defer"  src="/vendor/log.js"></script><script defer="defer"  src="/vendor/modernizr.js"></script><script defer="defer"  src="/scripts/script.js"></script></body></html>